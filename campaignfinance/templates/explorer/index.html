{% extends 'base.html' %}
{% load humanize %}

{% block content %}
    <h1>Campaign Finance Explorer</h1>
    <p>There's a lot of money in Chicago politics (and it's not all Rahm Emanuel's).</p>
    <p>Check the list of all 51 mayoral and aldermanic races below to see how the candidates stack up (or don't in some cases). Click on a race or a candidate to dig deeper into how their campaigns are financed.</p>
        {% if races %}
            {% for race in races %}
            <hr>
            <div class="row">
                <div class="col-sm-3">
                    <h3><a href="race/{{race.ward}}">{{ race.name }}</a></h3>
                </div>
                <div class="col-sm-9">
                    {% for candidate in race.appcandidate_set.all %}
                        <li>
                            <a href="../../candidate/{{candidate.id}}">{{ candidate }}</a>: ${{ candidate.sum_contributions|intcomma  }}
                        </li>
                    {% endfor %}
                </div>
            </div>

            {% endfor %}
        {% else %}
            <strong>There are no races present.</strong>
        {% endif %}
    
{% endblock %}